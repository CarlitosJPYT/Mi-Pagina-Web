CREATE DATABASE BD;
USE BD;
show databases;

CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(255) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE posts (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    title VARCHAR(255) NOT NULL,
    content TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES BD.users(id) ON DELETE CASCADE
);

show create table users;
show create table posts;

INSERT INTO users (username, password, email) VALUES
('admin', 'pradaospina', 'juanpana10ospina@gmail.com'),
('user1', 'password123', 'juanes10ospina@gmail.com'),
('user2', 'mypassword', 'juanestebanpradaospina@gmail.com');
INSERT INTO posts (user_id, title, content) VALUES
(1, 'First Post', 'This is the content of the first post.'),
(2, 'Second Post', 'This is the content of the second post.'),
(3, 'Third Post', 'This is the content of the third post.');

SELECT * FROM users;
SELECT * FROM posts;
SELECT COUNT(*) FROM users;
SELECT COUNT(*) FROM posts;
SELECT * FROM users WHERE username = 'admin';
SELECT * FROM posts WHERE user_id = 1;
SELECT p.title, p.content FROM posts p JOIN users u ON p.user_id = u.id WHERE u.username = 'admin';
SELECT p.title, u.username FROM posts p JOIN users u ON p.user_id = u.id WHERE u.username = 'admin';
SELECT p.title, p.content FROM posts p WHERE p.created_at > NOW() - INTERVAL 7 DAY;
SELECT u.username, COUNT(p.id) AS post_count FROM users u LEFT JOIN posts p ON u.id = p.user_id GROUP BY u.id;